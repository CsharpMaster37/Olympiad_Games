<!DOCTYPE html>
<html lang="ru">
  <head>
    <%- include('com-head.ejs') %>
    <link rel="stylesheet" href="../styles/rating-style.css"/>
    <title>Рейтинг</title>
  </head>
  <body>
    <div class="wrapper">
      <%- include('com-header.ejs') %>
        <main class="main">
            <div class="col-sm-12">              
              <div class="wrapper-rating">
                <div class="wrapper-rating-href">
                  <a class="button-rating font-toolbar <%= href === 'rating_all' ? 'active' : '' %>" href="/rating_all" role="button" >Общий</a>
                  <a class="button-rating font-toolbar <%= href === 'rating_square' ? 'active' : '' %>" href="/rating_square" role="button" >Квадрат</a>
                  <a class="button-rating font-toolbar <%= href === 'rating_carousel' ? 'active' : '' %>" href="/rating_carousel" role="button" >Карусель</a>         
                </div>                      
                <% progress.forEach(user => { %>
                  <table class="progress-table">
                    <thead>
                      <tr>
                        <th colspan="<%= count + 1 %>"><%= user.username %></th>
                      </tr>
                      <tr>
                        <th>Сумма</th>
                        <% for (let i = 1; i <= count; i++) { %>
                          <th><%= i %></th>
                        <% } %>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td>
                          <% if (user.carouselProgress.values.length  !== 0) { %>
                            <%= user.carouselProgress.score %>
                          <% } %>
                        </td>
                        <% for (let i = 1; i <= count; i++) { %>
                          <td><%= user.carouselProgress.values[i - 1] %></td>
                        <% } %>
                      </tr>
                    </tbody>
                  </table>
                <% }); %>
              </div>
            </div>
        </main>
        <%- include('com-footer.ejs') %>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>
